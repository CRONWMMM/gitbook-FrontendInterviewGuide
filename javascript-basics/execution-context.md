---
description: >-
  当 JS
  引擎处理一段脚本内容的时候，它是以怎样的顺序解析和执行的？脚本中的那些变量是何时被定义的？它们之间错综复杂的依赖关系又是怎样创建和链接的？要解释这些问题，就必须了解
  JS 执行上下文的概念。
---

# 执行上下文

### 什么是执行上下文

{% hint style="info" %}
当 `JS` 引擎解析到可执行代码片段的时候，就会先做一些执行前的准备工作，这个 **“准备工作”**，就叫做 **"执行上下文\(execution context 简称 `EC`\)"**。
{% endhint %}

### 为什么需要执行上下文

执行上下文为我们的可执行代码块提供了执行前的必要准备工作，例如：构建代码块作用域、提供代码块需要用到的变量（`VO / AO`）、提供代码块调用者的对象访问（`this`）等。

### 执行上下文的类型

javascript 中有三种执行上下文类型，分别是：

* **全局执行上下文**——这是默认或者说是最基础的执行上下文，一个程序中只会存在一个全局上下文，

  它在整个 `javascript` 脚本的生命周期内都会存在于执行堆栈的最底部且不能被栈弹出销毁。全局上下文会生成一个全局对象（以浏览器环境为例，这个全局对象是 window），并且将 `this` 值绑定到这个全局对象上。

* **函数执行上下文**——每当一个函数被调用时，都会创建一个新的函数执行上下文（不管这个函数是不是被重复调用的）
* **Eval 函数执行上下文**—— 执行在 `eval` 函数内部的代码也会有它属于自己的执行上下文，但由于并不经常使用 `eval`，所以在这里不做分析。

### 执行上下文的生命周期

执行上下文的生命周期有三个阶段，分别是：

* 创建阶段
* 执行阶段
* 销毁

### 相关参考

* [JavaScript 深入之执行上下文](https://github.com/mqyqingfeng/Blog/issues/4)
* [\[译\] 理解 JavaScript 中的执行上下文和执行栈](https://juejin.im/post/5ba32171f265da0ab719a6d7#heading-1)
* [知乎：JS中的作用域链是在什么时候建立的？](https://www.zhihu.com/question/36751764)

